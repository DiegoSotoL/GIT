---
layout: post
title:  "1.29 Vitals"
date:   2020-05-12
categories: release
---

- more support for vitals 
    - base vitals, max vitals (after modifications), and current vital values
    - render below name (viewer config)
    
## Vitals
These are RPG resources like stamina, hp, and mp that have maximum and current values.
The maximum values are derived from a base value (`Player.baseVitals.<vital>`), 
statistics, dimensions, and modifiers. An example definition is
```javascript
    da.vitalLimits['stamina'] = {
        display: "STM", // abbreviation for rendering on canvas
        color: "hsl(100, 50%, 50%)", // color for rendering on canvas
        // description of distribution for randomly creating a character
        low  : 0,
        high : 500,
        avg  : 30,
        stdev: 6,
        bias : 0,
        // this calculates the derived max value 
        calc() {
            // get properties with this.get methods
            return this.getBaseVitals('stamina') + this.get('str') * 2;
        },
    };
```
The `calc` function computes the derived max value and is optional. 
If it's not specified, then `this.getBaseVitals(<vital>)` is used.
`Player.maxVital.<vital>` is the computed max values and should be read from but not written to.
`Player.vitals.<vital>` is the current value to be directly modified in game like
```javascript
PC.vitals.stamina -= 10;
```

If the default vitals are not appropriate for your system, you can remove them from `da.vitalLimits` 
before calling `da.load`.

### Rendering vitals

In the viewer config passed to `da.draw`, the `printVitals` option configures whether
vitals are rendered or not. Refer back to `da.defaultConfig` for default values of other config options.

An example render is below, where the stamina vital is less than maximum while sanity is full.
The max bar width is based on `Player.maxVitals.<vitals> / da.vitalLimits.<vitals>.high`.

![vitals](https://i.imgur.com/4U2IlO4.png)

